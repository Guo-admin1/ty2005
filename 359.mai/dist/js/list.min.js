"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function _createClass(t,i,n){return i&&_defineProperties(t.prototype,i),n&&_defineProperties(t,n),t}window.onload=function(){function p(t){return t?JSON.parse(t):{}}new(function(){function t(){_classCallCheck(this,t),this.pro=$(".pro-a"),this.x=$(".pro-a i"),this.plus=$(".plus"),this.reduce=$(".reduce"),this.inp=$(".inp"),this.add_btn=$(".goods-buy span"),this.addEvent()}return _createClass(t,[{key:"addEvent",value:function(){this.pro.each(function(t,i){$(i).click(function(t){"A"===t.target.nodeName&&($(this).addClass("pro-a-plus"),$(this).find("i").addClass("pro-i-plus"))})}),this.x.each(function(t,i){$(i).click(function(){$(this).removeClass("pro-i-plus"),$(this).parent().removeClass("pro-a-plus")})}),this.plus.each(function(t,i){$(i).click(function(){var t=$(this).prev().val();t<99&&(t++,$(this).prev().val(t))})}),this.reduce.each(function(t,i){$(i).click(function(){var t=$(this).next().val();1<t&&(t--,$(this).next().val(t))})}),this.inp.each(function(t,i){$(i).blur(function(){!/^\d+$/.test($(this).val())||$(this).val()<1?$(this).val("1"):99<$(this).val()&&$(this).val("99")})}),this.add_btn.each(function(t,i){$(i).click(function(t,i){var n=$(this).parents("li").attr("data-goods-id"),e=$(this).parents("li").children("a").children("p").text(),a=$(this).parents("li").children("a").children("img").attr("src"),s=$(this).parent().prev().text(),r=parseInt($(this).prev().prev().val()),c=window.localStorage,o=p(c.getItem("goods"));n in o?o[n].num+=r:o[n]={src:a,txt:e,price:s,num:r},c.setItem("goods",JSON.stringify(o));var l=$(".go-cart");l.css("display","block"),$(".go-cart span").click(function(){location.href="./cart.html"}),$(".close").click(function(){l.css("display","none")});var u,h=0;for(u in o)h+=o[u].num;l.children("em").text("加入购物车成功，共".concat(h,"件"))})})}},{key:"init",value:function(){var t,i=p(window.localStorage.getItem("goods"));for(t in i)i[t].num}}]),t}())};